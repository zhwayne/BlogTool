title: çŠ¶æ€æ é£æ ¼åŠç”¨æ³•ç®€è¿°
categories:
- iOS
    date: 2015-12-16 17:49:15
    tags:
---


ç°å­˜çš„ iOS 7/8/9 é‡‡ç”¨äº†æ²‰æµ¸å¼çŠ¶æ€æ è®¾è®¡ï¼Œè€Œä¸”çŠ¶æ€æ é£æ ¼ä¸»è¦ä»¥é»‘ç™½äºŒè‰²ä¸ºä¸»ï¼Œæ¯”å¦‚**ç¤¼ç‰©è¯´**å’Œ**ä½³å­¦**ä¸¤æ¬¾ APP åˆ†åˆ«é‡‡ç”¨äº†è¿™ä¸¤ç§ä¸åŒçš„è®¾è®¡ã€‚

![](https://github.com/zhwayne/blog_resource/blob/gh-pages/2015/12/1.png?raw=true)![](https://github.com/zhwayne/blog_resource/blob/gh-pages/2015/12/2.png?raw=true)



> Note: ä¸€èˆ¬è€Œè¨€ï¼Œæ·±è‰²èƒŒæ™¯å¯¼èˆªæ ä¼šæ­é…ç™½è‰²çŠ¶æ€æ ï¼Œæµ…è‰²èƒŒæ™¯çš„åˆ™ä¼šæ­é…æ·±è‰²çŠ¶æ€æ ã€‚



<!--more-->

iOS 9 ä»¥å‰æˆ‘ä»¬ä¸€èˆ¬åœ¨é¡¹ç›® info.plist æ–‡ä»¶ä¸­å°†`UIViewControllerBasedStatusBarAppearance`é”®è®¾ä¸º NOï¼Œç„¶ååœ¨é€‚å½“çš„è§†å›¾æ§åˆ¶å™¨ä¸­ä½¿ç”¨ä¸‹é¢çš„ä»£ç è®¾ç½®çŠ¶æ€æ é£æ ¼ï¼š

``` 
/// è®¾ç½®ç™½è‰²çŠ¶æ€æ 
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];

/// è®¾ç½®é»‘è‰²çŠ¶æ€æ 
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
```
![UIViewControllerBasedStatusBarAppearance](http://upload-images.jianshu.io/upload_images/548687-8d11bbb6acb1f7a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä¸€åˆ‡ä¼¼ä¹å¾ˆç¾å¥½ã€‚



ç„¶è€Œåœ¨ iOS 9ï¼ˆXcode 7ï¼‰ä¸­ä¸Šè¿°æ–¹æ³•ä¼šå¼•èµ·ä¸€ä¸ªè­¦å‘Šï¼Œè‹¹æœä¸å†å»ºè®®ä½¿ç”¨æ—§æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦é‡è½½è§†å›¾æ§åˆ¶å™¨çš„`+preferredStatusBarStyle`æ–¹æ³•å»è®¾ç½®çŠ¶æ€æ é£æ ¼ï¼š


![](http://upload-images.jianshu.io/upload_images/548687-18ec6af61b31c72b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


```
// Setting the statusBarStyle does nothing if your application is using the default UIViewController-based status bar system.
@available(iOS, introduced=2.0, deprecated=9.0, message="Use -[UIViewController preferredStatusBarStyle]")
public var statusBarStyle: UIStatusBarStyle
@available(iOS, introduced=2.0, deprecated=9.0, message="Use -[UIViewController preferredStatusBarStyle]")
public func setStatusBarStyle(statusBarStyle: UIStatusBarStyle, animated: Bool)
```
é‚£ä¹ˆç°åœ¨çˆ½å¿«åœ°æŠŠé¡¹ç›® info.plist æ–‡ä»¶ä¸­çš„`UIViewControllerBasedStatusBarAppearance`é”®è®¾ä¸º NOï¼Œæˆ–è€…åˆ é™¤å§ã€‚åˆ«å¿˜äº†æŠŠä½ é¡¹ç›®ä¸­çš„`setStatusBarStyle`ä¹Ÿä¸€å¹¶åˆ é™¤ã€‚æˆ‘å°†å‘ä½ æ¼”ç¤ºå¦‚ä½•ä¼˜é›…çš„è®¾ç½®çŠ¶æ€æ é£æ ¼ã€‚

---
æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œè®¾ç½® view controller èƒŒæ™¯è‰²ä¸ºæ°´è“è‰²ï¼Œå¹¶é‡è½½ `preferredStatusBarStyle()` æ–¹æ³•ã€‚

```swift
override func viewDidLoad() {
    super.viewDidLoad()
    self.view.backgroundColor = UIColor.init(colorLiteralRed: 0.157, green: 0.694, blue: 1, alpha: 1)
}

override func preferredStatusBarStyle() -> UIStatusBarStyle {
    return .LightContent
}
```


![ç™½è‰²çŠ¶æ€æ ](http://upload-images.jianshu.io/upload_images/548687-22dc7d10045741ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


æ•ˆæœçœ‹èµ·æ¥ä¸é”™å§ğŸ¤“ã€‚ç„¶è€Œæ¥ä¸‹æ¥ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹å›¾ã€‚

![View controller embed in a navigation controller](http://upload-images.jianshu.io/upload_images/548687-38c88d3a39031a6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/568)


ç¼–è¯‘è¿è¡Œé¡¹ç›®ï¼Œè¿™ç§æƒ…å†µä¸‹ä½ ä¼šå‘ç°ä¸Šè¿°æ–¹æ³•å¤±æ•ˆï¼ŒçŠ¶æ€æ åˆå˜é»‘è‰²äº†ï¼š


![çŠ¶æ€æ åˆå˜é»‘è‰²äº†](http://upload-images.jianshu.io/upload_images/548687-97bdb8d93321973b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å…¶å®å¹¶ä¸ç®—æ˜¯å¤±æ•ˆäº†ï¼Œæˆ‘ä»¬ä¸å¦¨æ¥çœ‹çœ‹`preferredStatusBarStyle()`çš„å®šä¹‰ï¼š

```swift
// These methods control the attributes of the status bar when this view controller is shown. They can be overridden in view controller subclasses to return the desired status bar attributes.
@available(iOS 7.0, *)
public func preferredStatusBarStyle() -> UIStatusBarStyle // Defaults to UIStatusBarStyleDefault
```

> å¤§æ„æ˜¯è¯´å½“ view controller æ˜¾ç¤ºçš„æ—¶å€™ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥æ§åˆ¶çŠ¶æ€æ çš„å±æ€§ã€‚ä½ å¯ä»¥åœ¨ UIViewController çš„å­ç±»ä¸­é‡è½½è¯¥æ–¹æ³•è¿”å›ä½ æœŸæœ›çš„çŠ¶æ€æ å±æ€§ã€‚

é‚£ä¸ºä»€ä¹ˆæˆ‘ç°åœ¨é‡è½½è¯¥æ–¹æ³•å´ä¸èµ·ä½œç”¨å‘¢ï¼Ÿäº‹å®ä¸Š`preferredStatusBarStyle()`æ ¹æœ¬æœªè¢«è°ƒç”¨ã€‚åŸå› èƒ½æ˜¯ UINavigationController ä½œä¸ºä¸€ä¸ªå®¹å™¨â€œæ‰¿åŒ…â€äº†è¿™äº›äº‹æƒ…ã€‚æˆ‘ä»¬æ‰€æ·»åŠ çš„ view controller éƒ½åœ¨å®ƒçš„å¯¼èˆªæ ˆä¸­ï¼Œå¯ä»¥è¯´è¿™äº›æ§åˆ¶å™¨éƒ½æ˜¯å¯¼èˆªæ æ§åˆ¶å™¨çš„`child view controller`ã€‚æ­¤æ—¶å¯¼èˆªæ æ§åˆ¶å™¨æ‰æ˜¯çœŸæ­£èƒ½æ“ä½œçŠ¶æ€æ çš„ Bossã€‚

![Objects managed by the navigation controller(Image from: [Apple](http://developer.apple.com))](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Art/nav_controllers_objects.jpg)



ä¸ºäº†éªŒè¯ä¸€å¯èƒ½æ€§ï¼Œæˆ‘æŠŠåŸå…ˆ view controller ä¸­çš„`preferredStatusBarStyle()`æ–¹æ³•åˆ é™¤ï¼Œç„¶åå®ä¾‹åŒ–ä¸€ä¸ª`UINavigationController`çš„å­ç±»`NavigationController`ï¼Œåœ¨ Storyboard ä¸­å°†å…¶å…³è”åˆ°å¯¼èˆªæ æ§åˆ¶å™¨ä¸Šä¸”è®¾ç½®äº†naviagation bar çš„ bar tint color ä¾¿äºåŒºåˆ†ï¼Œæœ€ååœ¨ `NavigationController` ä¸­é‡è½½`preferredStatusBarStyle()`æ–¹æ³•ã€‚æˆ‘ç»ˆäºå¾—åˆ°äº†æƒ³è¦çš„ç»“æœã€‚

![åœ¨NavigationControlleré‡è½½preferredStatusBarStyle()æ–¹æ³•](http://upload-images.jianshu.io/upload_images/548687-c9a24ab55aab8319.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![æ­£ç¡®çš„ç»“æœ](http://upload-images.jianshu.io/upload_images/548687-6dd589c9ee8c5c56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



å¦å¤–ï¼Œæˆ‘ä»¬å¯èƒ½é‡åˆ°è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šåœ¨å¯¼èˆªæ ˆä¸­çš„ç¬¬ä¸€ä¸ª view controller é‡Œçš„çŠ¶æ€æ ä¸ºç™½è‰²ï¼Œç¬¬äºŒä¸ª view controller é‡Œçš„çŠ¶æ€æ ä¸ºé»‘è‰²ã€‚ä¸Šé¢è¿™ç§åœ¨å¯¼èˆªæ æ§åˆ¶å™¨ä¸­æ§åˆ¶çŠ¶æ€æ å±æ€§çš„ä¸€åˆ€åˆ‡çš„ç²—æš´åšæ³•æ˜¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Œé‚£ä¹ˆè¿™é‡Œæœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³• :

```swift
// Override to return a child view controller or nil. If non-nil, that view controller's status bar appearance attributes will be used. If nil, self is used. Whenever the return values from these methods change, -setNeedsUpdatedStatusBarAttributes should be called.
@available(iOS 7.0, *)
public func childViewControllerForStatusBarStyle() -> UIViewController?
```
> å¤§æ„æ˜¯ï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›å€¼ä¸º non-nilï¼Œåˆ™å°†æ›´æ”¹çŠ¶æ€æ å±æ€§çš„æ§åˆ¶æƒç§»äº¤ç»™ä½ è¿”å›çš„é‚£ä¸ªæ§åˆ¶å™¨ã€‚å¦‚æœè¿”å›å€¼ä¸º nil æˆ–è€…ä¸é‡è½½è¯¥æ–¹æ³•ï¼Œé‚£ä¹ˆç”±è‡ªå·±è´Ÿè´£æ§åˆ¶çŠ¶æ€æ çš„å±æ€§ã€‚å½“çŠ¶æ€æ çš„æ ·å¼è¢«æ›´æ”¹ä¹‹å‰ï¼Œè¯¥æ§åˆ¶å™¨çš„`-setNeedsUpdatedStatusBarAttributes`æ–¹æ³•åº”è¯¥è¢«è°ƒç”¨ã€‚

å‰é¢å‡ å¥å¾ˆå¥½ç†è§£ï¼Œæœ€åä¸€å¥æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

å¦‚æœåœ¨è¯¥ UIViewControlle rå·²ç»åœ¨æ˜¾ç¤ºåœ¨å½“å‰ï¼Œä½ å¯èƒ½è¿˜è¦åœ¨å½“å‰é¡µé¢ä¸æ—¶çš„æ›´æ”¹çŠ¶æ€æ çš„ styleï¼Œé‚£ä¹ˆä½ éœ€è¦å…ˆè°ƒç”¨`-setNeedsStatusBarAppearanceUpdate`æ–¹æ³•ï¼ˆå®ƒé€šçŸ¥ç³»ç»Ÿå»è°ƒç”¨å½“å‰UIViewController çš„`-preferredStatusBarStyle`æ–¹æ³•)ã€‚

è¦å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå°±åªèƒ½åœ¨`NavigationController`ä¸­é‡è½½`-childViewControllerForStatusBarStyle`æ–¹æ³•ï¼Œæ—¢ç„¶å®ƒè¿”å›ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨çš„å®ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦å°†å¯¼èˆªæ ˆä¸­çš„`topViewController`ä½œä¸ºè¿”å›å€¼ï¼ˆè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼Œä¸”æ¯æ¬¡~~è®¾ç½®çŠ¶æ€æ  style ~~push/pop view controller è¯¥æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ï¼‰ï¼Œç„¶ååœ¨éœ€è¦è®¾ç½®çŠ¶æ€æ  style çš„ view controller ä¸­åƒæœ€å¼€å§‹ä¸€æ ·é‡è½½`-preferredStatusBarStyle`æ–¹æ³•å³å¯ã€‚

```swift
override func childViewControllerForStatusBarStyle() -> UIViewController? {
    return self.topViewController
}
```


![æœ€ç»ˆæ•ˆæœ](http://upload-images.jianshu.io/upload_images/548687-2226be14455b06d0.gif?imageMogr2/auto-orient/strip)

